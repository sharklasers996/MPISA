<!DOCTYPE html>
<html>
<head>
    <title>M.P.I.S.A</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="./Content/main.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-resource.js"></script>
    <script src="http://underscorejs.org/underscore.js"></script>

    <script src="./Scripts/ng-app/app.js"></script>
    <script src="./Scripts/ng-app/objects/async-result-api-call.js"></script>
    <script src="./Scripts/ng-app/objects/async-result.js"></script>
    <script src="./Scripts/ng-app/directives/video-embed.js"></script>
    <script src="./Scripts/ng-app/directives/refreshable.js"></script>
    <script src="./Scripts/ng-app/filters/post-filter.js"></script>
    <script src="./Scripts/ng-app/api/service.js"></script>

    <script src="./Scripts/ng-app/api/models/content-item.js"></script>
    <script src="./Scripts/ng-app/api/models/post.js"></script>
    <script src="./Scripts/ng-app/api/models/post-details.js"></script>
    <script src="./Scripts/ng-app/api/models/lyrics-album.js"></script>
    <script src="./Scripts/ng-app/api/models/lyrics.js"></script>

    <script src="./Scripts/ng-app/controllers/main-controller.js"></script>
</head>

<body>
    <div ng-app="mpisaApp">
        <div ng-controller="mainController">
            <div class="site-container">
                <div class="loader-container loader-container-fixed"
                     ng-show="getPostsAsync.isInProgress">
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                </div>
                <div class="header-container noselect">

                    <div class="logo">
                        <img src="./Content/galva.png" />
                    </div>

                    <div class="header-container-right">
                        <div class="banner">
                            <img src="./Content/banner_temp.png" />
                        </div>

                        <div class="menu-desktop">
                            <a ng-class="getMenuItemClass(0)"
                               ng-click="setMenuIndex(0)">Įrašai</a>
                            <a ng-class="getMenuItemClass(1)"
                               ng-click="setMenuIndex(1)">Nuotraukos</a>
                            <a ng-class="getMenuItemClass(2)"
                               ng-click="setMenuIndex(2)">Bio</a>
                            <a ng-class="getMenuItemClass(3)"
                               ng-click="setMenuIndex(3)">Muzika</a>
                            <a ng-class="getMenuItemClass(4)"
                               ng-click="setMenuIndex(4)">Kontaktas</a>
                        </div>
                    </div>
                </div>
                <div ng-repeat="post in posts | postFilter:menuIndex"
                     ng-show="menuIndex === 0 || menuIndex === 1">
                    <div class="post"
                         ng-cloak>
                        <div class="loader-container loader-container-absolute"
                             ng-show="post.getDetailsAsync.isInProgress">
                            <i class="fa fa-circle-o-notch fa-spin"></i>
                        </div>
                        <h1>{{ post.details.title }}</h1>
                        <div class="poster-text-container"
                             ng-hide="::post.isPhotoAlbum">
                            <img src="{{post.details.posterLink}}" />
                            <div class="text-container">{{post.details.text}}</div>
                        </div>
                        <div class="photo-album-text-container"
                             ng-show="::post.isPhotoAlbum">
                            <div class="photo-album-container noselect"
                                 ng-hide="post.getDetailsAsync.isInProgress">

                                <div class="loader-container loader-container-absolute"
                                     ng-show="post.getPhotosAsync.isInProgress">
                                    <i class="fa fa-circle-o-notch fa-spin"></i>
                                </div>

                                <a href="{{post.details.photoLinks[post.details.photoAlbumPageIndex]}}"
                                   target="_blank">
                                    <img src="{{post.details.photoLinks[post.details.photoAlbumPageIndex]}}" />
                                </a>
                                <div class="photo-album-pagination">
                                    <a class="btn-photo-album"
                                       ng-click="post.details.previousPhoto()"><i class="fa fa-step-backward"></i></a>
                                    <span class="photo-album-page-counter">{{ post.details.photoAlbumPageIndex + 1}}/{{post.details.photoLinks.length}}</span>
                                    <a class="btn-photo-album"
                                       ng-click="post.details.nextPhoto()"><i class="fa fa-step-forward"></i></a>
                                </div>
                            </div>
                            <div class="text-container">
                                {{post.details.text}}
                            </div>
                        </div>
                        <div class="links-container"
                             ng-hide="::post.isPhotoAlbum">
                            <a ng-repeat="link in post.details.links"
                               href="{{link.url}}"
                               target="_blank">{{link.text}}</a>
                        </div>
                        <div ng-repeat="embed in post.details.embeds"
                             ng-hide="::post.isPhotoAlbum">
                            <video-embed src="embed"></video-embed>
                        </div>
                    </div>
                </div>
                <div class="generic-container"
                     ng-show="menuIndex === 3">
                    <h1 class="music-album-title">Demo 2015</h1>
                    <iframe class="soundcloud-container"
                            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/306497510&amp;color=ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false"></iframe>
                    <h1 class="music-album-title">Pakeliui į Durnyną</h1>
                    <iframe class="soundcloud-container"
                            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/306497510&amp;color=ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false"></iframe>
                </div>
            </div>
        </div>
    </div>
</body>
</html>